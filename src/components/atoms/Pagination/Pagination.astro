---
const { currentPage, totalPages, baseUrl, page } = Astro.props;

// Use Astro's native pagination URLs when available
const prevUrl = page?.url?.prev;
const nextUrl = page?.url?.next;

// Function to generate URL for specific page number
// For Astro's paginate(), page 1 is at baseUrl/1, page 2 at baseUrl/2, etc.
function getPageUrl(pageNum: number): string {
  return `${baseUrl}/${pageNum}`;
}
---

<section class="pagination">
  <div class="pagination__container">
    {/* Botón Anterior */}
    {prevUrl ? (
      <a
        aria-label="Ir a la página anterior"
        data-astro-prefetch="hover"
        href={prevUrl}
        class="pagination__link pagination__link--active"
      >
        Anterior
      </a>
    ) : (
      <span class="pagination__link pagination__link--disabled">
        Anterior
      </span>
    )}

    {/* Números de página */}
    {Array.from({ length: totalPages }, (_, i) => i + 1).map((pageNum) => (
      <a
        aria-label={`Ir a la página ${pageNum}`}
        data-astro-prefetch="hover"
        href={getPageUrl(pageNum)}
        class:list={[
          "pagination__link",
          pageNum === currentPage ? "pagination__link--current" : "",
        ]}
      >
        {pageNum}
      </a>
    ))}

    {/* Botón Siguiente */}
    {nextUrl ? (
      <a
        aria-label="Ir a la página siguiente"
        data-astro-prefetch="hover"
        href={nextUrl}
        class="pagination__link pagination__link--active"
      >
        Siguiente
      </a>
    ) : (
      <span class="pagination__link pagination__link--disabled">
        Siguiente
      </span>
    )}
  </div>
</section>

<style>
  .pagination {
    display: flex;
    justify-content: center;
    margin: 2rem 0;
  }

  .pagination__container {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }

  .pagination__link {
    padding: 0.5rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 0.375rem;
    text-decoration: none;
    color: var(--text-color);
    background-color: var(--bg-color);
    transition: all 0.2s ease;
    font-weight: 500;
  }

  .pagination__link--active:hover {
    background-color: var(--accent);
    color: white;
    border-color: var(--accent);
  }

  .pagination__link--current {
    background-color: var(--accent);
    color: white;
    border-color: var(--accent);
  }

  .pagination__link--disabled {
    opacity: 0.5;
    cursor: not-allowed;
    color: var(--text-muted);
  }

  @media (max-width: 768px) {
    .pagination__container {
      gap: 0.25rem;
    }

    .pagination__link {
      padding: 0.375rem 0.75rem;
      font-size: 0.875rem;
    }
  }
</style>
